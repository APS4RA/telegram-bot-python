from telebot import TeleBot
from telebot.types import BotCommand
import os
from dotenv import load_dotenv
from telebot import TeleBot
from telebot.types import BotCommand, InlineKeyboardMarkup, InlineKeyboardButton, WebAppInfo

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
def register_commands(bot: TeleBot):
    commands = [
        BotCommand("start", "–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞"),
        BotCommand("hello", "–ü–æ–∑–¥–æ—Ä–æ–≤–∞—Ç—å—Å—è"),
    ]
    
    bot.set_my_commands(commands)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
def send_welcome(bot: TeleBot, message):
    welcome_text = ("–ü—Ä–∏–≤–µ—Ç! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ CATCHING THE CASH üò∫\n"
                    "–û—Ç–Ω—ã–Ω–µ —Ç—ã ‚Äî –¥–∏—Ä–µ–∫—Ç–æ—Ä –∫—Ä–∏–ø—Ç–æ–±–∏—Ä–∂–∏.\n"
                    "–ö–∞–∫–æ–π? –í—ã–±–∏—Ä–∞–π —Å–∞–º. –¢–∞–ø–∞–π –ø–æ —ç–∫—Ä–∞–Ω—É, —Å–æ–±–∏—Ä–∞–π –º–æ–Ω–µ—Ç—ã, "
                    "–∫–∞—á–∞–π –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥, —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–æ—Ö–æ–¥–∞.\n"
                    "–ú—ã –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –æ—Ü–µ–Ω–∏–º —ç—Ç–æ –≤–æ –≤—Ä–µ–º—è –ª–∏—Å—Ç–∏–Ω–≥–∞ —Ç–æ–∫–µ–Ω–∞, –¥–∞—Ç—ã –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—ã —É–∑–Ω–∞–µ—à—å —Å–æ–≤—Å–µ–º —Å–∫–æ—Ä–æ.\n"
                    "–ü—Ä–æ –¥—Ä—É–∑–µ–π –Ω–µ –∑–∞–±—ã–≤–∞–π ‚Äî –∑–æ–≤–∏ –∏—Ö –≤ –∏–≥—Ä—É –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –≤–º–µ—Å—Ç–µ –µ—â—ë –±–æ–ª—å—à–µ –º–æ–Ω–µ—Ç!")

    # –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Mini App
    markup = InlineKeyboardMarkup()
    button = InlineKeyboardButton(text="–ò–≥—Ä–∞—Ç—å –≤ 1 –∫–ª–∏–∫ üò∫", web_app=WebAppInfo(url="https://graceful-pika-90363b.netlify.app/"))
    markup.add(button)

    # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–æ–π
    bot.send_message(message.chat.id, welcome_text, reply_markup=markup)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥
def register_handlers(bot: TeleBot):
    bot.register_message_handler(lambda message: send_welcome(bot, message), commands=['start'])
